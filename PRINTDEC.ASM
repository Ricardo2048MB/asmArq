.MODEL SMALL ;EL PROCEDIMIENTO ESTA LISTO (CREO)
.STACK
.DATA
.CODE

TEST_WRITE_DECIMAL PROC
	MOV DX, 12345
	CALL WRITE_DECIMAL
	MOV AX, 4C00H
	INT 21H
TEST_WRITE_DECIMAL ENDP

PUBLIC WRITE_DECIMAL
WRITE_DECIMAL PROC; NEAR dejamos esto pendiente para comer
	PUSH AX
	PUSH CX
	PUSH DX
	PUSH SI
	MOV AX, DX
	MOV SI, 10
	XOR CX, CX
NON_ZERO:
	XOR DX, DX
	DIV SI
	PUSH DX
	INC CX
	OR AX, AX
	JNZ NON_ZERO
WRITE_DIGIT_LOOP:
	POP DX
	CALL WRITE_HEX_DIGIT
	LOOP WRITE_DIGIT_LOOP
;END_DECIMAL:
	POP SI
	POP DX
	POP CX
	POP AX
	RET
WRITE_DECIMAL ENDP

WRITE_HEX_DIGIT PROC
	PUSH DX
	
	CMP DL, 10
	JAE HEX_LETTER
	ADD DL, "0"
	JMP SHORT WRITE_DIGIT
	HEX_LETTER:
	ADD DL, "A"-10
	WRITE_DIGIT:
	CALL WRITE_CHAR
	
	POP DX
	RET
WRITE_HEX_DIGIT ENDP

PUBLIC WRITE_CHAR
WRITE_CHAR PROC
	PUSH AX
	MOV AH, 02
	INT 21H
	POP AX
	RET
WRITE_CHAR ENDP
