.MODEL SMALL
.STACK
.DATA
.CODE

TEST_WRITE_DECIMAL PROC
	MOV DX, 12345
	CALL WRITE_DECIMAL
	MOV AX, 4C00H
	INT 21H
TEST_WRITE_DECIMAL ENDP

PUBLIC WRITE_DECIMAL
WRITE_DECIMAL PROC
	PUSH AX
	PUSH CX
	PUSH DX
	PUSH SI
	MOV AX, DX
	MOV SI, 10
	XOR CX, CX
NON_ZERO:
	XOR DX, DX
	DIV SI
	PUSH DX
	INC CX
	OR AX, AX
	JNE NON_ZERO
WRITE_DIGIT_LOOP:
	POP DX
	CALL WRITE_HEX_DIGIT
	LOOP
WRITE_DIGIT_LOOP
END_DECIMAL
	POP SI
	POP DX
	POP CX
	POP AX
	RET
WRITE_DECIMAL ENDP

WRITE_HEX_DIGIT PROC
	MOV CX, 4H
	SHR DL, CL
	ADD DL, "0"
	CALL WRITE_CHAR
	MOV DL, DH
	AND DL, 0FH
	ADD DL, "A"-10
	CALL WRITE_CHAR
	RET
WRITE_HEX_DIGIT ENDP

PUBLIC WRITE_CHAR
WRITE_CHAR PROC
	PUSH AX
	MOV AH, 02
	INT 21H
	POP AX
	RET
WRITE_CHAR ENDP